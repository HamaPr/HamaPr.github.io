---
layout: post
title: "Subnetting"
date: 2025-06-27 17:00:00 +0900
categories: [network]
---

## 1. 개요

**서브네팅(Subnetting)**은 네트워크 ID 비트를 확장하여 하나의 큰 네트워크를 더 작은 여러 개의 네트워크로 분할하는 기술이다.
초기 인터넷의 클래스 기반 주소 체계(A, B, C Class)가 가진 IP 주소 낭비 문제를 해결하고, 브로드캐스트 도메인을 축소하여 네트워크 성능과 보안을 최적화하기 위해 필수적으로 사용된다.

### 핵심 목표
*   **IP 주소 절약**: 할당된 IP 대역을 실제 필요한 크기에 맞게 쪼개어 사용한다.
*   **네트워크 성능 향상**: 브로드캐스트 트래픽이 전파되는 범위를 제한하여 불필요한 트래픽을 줄인다.
*   **보안 강화**: 부서별, 용도별로 네트워크를 물리적/논리적으로 분리하여 접근 제어를 용이하게 한다.

### IP 클래스 (레거시) vs CIDR
| 클래스 | 기본 서브넷 | 특징 |
|---|---|---|
| A Class | /8 (255.0.0.0) | 대규모 네트워크 (1600만 호스트) |
| B Class | /16 (255.255.0.0) | 중규모 네트워크 (6.5만 호스트) |
| C Class | /24 (255.255.255.0) | 소규모 네트워크 (254 호스트) |

---

## 2. CIDR 표기법

**Classless Inter-Domain Routing (CIDR)**은 유연한 IP 주소 할당을 위해 도입된 방식이다. `/24`, `/26`과 같이 접두어(Prefix) 길이로 서브넷 마스크를 표현한다.

### 서브넷 마스크와 호스트 수
| CIDR | 서브넷 마스크 | 호스트 수 (2^n - 2) |
|------|---------------|---------------------|
| /24 | 255.255.255.0 | 254 |
| /25 | 255.255.255.128 | 126 |
| /26 | 255.255.255.192 | 62 |
| /27 | 255.255.255.224 | 30 |
| /28 | 255.255.255.240 | 14 |
| /29 | 255.255.255.248 | 6 |
| /30 | 255.255.255.252 | 2 (PtP 연결용) |
| /32 | 255.255.255.255 | 1 (단일 호스트) |

> **호스트 수 계산 공식**: `2^(32 - CIDR) - 2`
> (네트워크 주소와 브로드캐스트 주소 2개를 제외해야 한다.)

---

## 3. 서브네팅 방법

### 예제: 192.168.1.0/24를 4개로 분할
C 클래스 네트워크 하나를 4개의 서브넷으로 나눈다고 가정한다.

**계산 과정:**
1.  **필요 서브넷 수**: 4개 = 2^2 → **2비트**를 네트워크 비트로 빌려와야 한다.
2.  **새로운 CIDR**: /24 + 2 = **/26**
3.  **새로운 서브넷 마스크**: 11111111.11111111.11111111.11000000 = **255.255.255.192**
4.  **서브넷 당 호스트 수**: 2^(8-2) - 2 = 64 - 2 = **62개**

**결과 테이블:**
| 서브넷 | 네트워크 주소 | 사용 가능 범위 | 브로드캐스트 주소 |
|---|---|---|---|
| #1 | 192.168.1.0/26 | .1 ~ .62 | .63 |
| #2 | 192.168.1.64/26 | .65 ~ .126 | .127 |
| #3 | 192.168.1.128/26 | .129 ~ .190 | .191 |
| #4 | 192.168.1.192/26 | .193 ~ .254 | .255 |

### 빠른 계산법 (매직 넘버)
서브넷 마스크의 마지막 옥텟(0이 아닌 값)을 256에서 뺀다.
*   `/26` 마스크: .192
*   **매직 넘버**: 256 - 192 = **64**
*   따라서 서브넷은 0, 64, 128, 192 간격으로 시작된다.

---

## 4. VLSM (Variable Length Subnet Mask)

모든 서브넷을 동일한 크기로 나누는 것(FLSM)이 아니라, 부서별 필요에 따라 다양한 크기로 나누는 방식이다.

**시나리오:**
*   영업팀 (50명) → /26 (62개)
*   개발팀 (20명) → /27 (30개)
*   관리팀 (10명) → /28 (14개)

**할당 예시:**
1.  **영업팀**: 192.168.1.0/26 (범위: 0 ~ 63)
2.  **개발팀**: 192.168.1.64/27 (범위: 64 ~ 95)
3.  **관리팀**: 192.168.1.96/28 (범위: 96 ~ 111)

---

## 5. 와일드카드 마스크

ACL(Access Control List)이나 OSPF 설정 시 사용되는 **역(Reverse) 마스크**이다.
서브넷 마스크의 0과 1을 반전시킨 값, 즉 `255.255.255.255 - 서브넷 마스크`로 계산한다.

*   `/24` (255.255.255.0) → **0.0.0.255**
*   `/26` (255.255.255.192) → **0.0.0.63**
*   단일 호스트 (Host) → **0.0.0.0**

---

## 6. 실습: 확인 및 설정

### 서브넷 정보 확인
```powershell
# Windows
ipconfig /all
```
```bash
# Linux
ip addr show
# 또는
ifconfig
```

### Cisco 라우터 설정
```cisco
Router(config)# interface g0/0
Router(config-if)# ip address 192.168.1.65 255.255.255.192
! 192.168.1.64/26 서브넷의 첫 번째 IP를 게이트웨이로 할당
Router(config-if)# no shutdown
```

---

## 7. 보안 고려사항

*   **네트워크 세그멘테이션**: 서브네팅을 통해 부서별, 용도별(개발/운영/DMZ) 네트워크를 분리하면 공격 발생 시 피해 확산을 억제할 수 있다.
*   **브로드캐스트 제어**: 서브넷 크기를 최소화하면 브로드캐스트 트래픽이 줄어들고, ARP Spoofing 등 L2 공격의 영향 범위도 축소된다.
*   **라우터 ACL 연동**: 서브넷 경계에 라우터/방화벽을 배치하고 ACL을 적용하여 서브넷 간 불필요한 트래픽을 차단한다.

<hr class="short-rule">
