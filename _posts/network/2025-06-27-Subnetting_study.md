---
layout: post
title: "서브네팅과 CIDR"
date: 2025-06-27 17:00:00 +0900
categories: [network]
---

## 1. 개념

**서브네팅(Subnetting)**은 네트워크 ID 비트를 확장하여 하나의 네트워크를 더 작은 여러 개의 네트워크로 분할하는 기술입니다.
IP 주소 낭비를 줄이고 브로드캐스트 도메인을 축소하여 네트워크 성능과 보안을 최적화합니다.

### 기본 정보

| 항목 | 설명 |
|------|------|
| 목적 | IP 주소 효율적 사용, 브로드캐스트 도메인 분리 |
| CIDR | Classless Inter-Domain Routing |
| 표기법 | 192.168.1.0/24 |

### IP 클래스 (레거시)

| 클래스 | 첫 옥텟 | 기본 서브넷 | 호스트 수 |
|--------|---------|-------------|-----------|
| A | 1-126 | /8 | 16,777,214 |
| B | 128-191 | /16 | 65,534 |
| C | 192-223 | /24 | 254 |

### 특수 주소

| 주소 | 용도 |
|------|------|
| 127.0.0.0/8 | 루프백 |
| 10.0.0.0/8 | 사설 (A) |
| 172.16.0.0/12 | 사설 (B) |
| 192.168.0.0/16 | 사설 (C) |
| 169.254.0.0/16 | APIPA |

---

## 2. CIDR 표기법

### 서브넷 마스크와 CIDR

| CIDR | 서브넷 마스크 | 호스트 수 |
|------|---------------|-----------|
| /8 | 255.0.0.0 | 16,777,214 |
| /16 | 255.255.0.0 | 65,534 |
| /24 | 255.255.255.0 | 254 |
| /25 | 255.255.255.128 | 126 |
| /26 | 255.255.255.192 | 62 |
| /27 | 255.255.255.224 | 30 |
| /28 | 255.255.255.240 | 14 |
| /29 | 255.255.255.248 | 6 |
| /30 | 255.255.255.252 | 2 |
| /32 | 255.255.255.255 | 1 (호스트) |

### 호스트 수 계산
```
호스트 수 = 2^(32-CIDR) - 2
(-2는 네트워크 주소와 브로드캐스트 주소)

예: /26
호스트 수 = 2^(32-26) - 2 = 64 - 2 = 62
```

---

## 3. 서브네팅 방법

### 예제: 192.168.1.0/24를 4개 서브넷으로 분할

**필요 비트 계산:**
- 4개 서브넷 → 2^2 = 4 → 2비트 필요
- 새 서브넷: /24 + 2 = /26

**결과:**
| 서브넷 | 네트워크 주소 | 가용 범위 | 브로드캐스트 |
|--------|---------------|-----------|--------------|
| 1 | 192.168.1.0/26 | .1 - .62 | .63 |
| 2 | 192.168.1.64/26 | .65 - .126 | .127 |
| 3 | 192.168.1.128/26 | .129 - .190 | .191 |
| 4 | 192.168.1.192/26 | .193 - .254 | .255 |

### 서브넷 주소 구하기 (빠른 계산)

**매직 넘버 방법:**
```
매직 넘버 = 256 - 서브넷 마스크의 마지막 옥텟

/26 마스크: 255.255.255.192
매직 넘버 = 256 - 192 = 64

서브넷 경계: 0, 64, 128, 192
```

### IP 주소가 속한 서브넷 찾기

**예제: 192.168.1.100 with /26**
1. 매직 넘버 = 64
2. 100 ÷ 64 = 1.xx → 1 × 64 = 64
3. 네트워크 주소: 192.168.1.64/26
4. 브로드캐스트: 192.168.1.127

---

## 4. VLSM (Variable Length Subnet Mask)

서로 다른 크기의 서브넷을 생성하여 IP 낭비 최소화.

### 예제: 3개 부서

| 부서 | 필요 호스트 | 할당 서브넷 | 실제 호스트 |
|------|-------------|-------------|-------------|
| 영업 | 50 | /26 (62) | 62 |
| 개발 | 25 | /27 (30) | 30 |
| 관리 | 10 | /28 (14) | 14 |

**할당:**
1. 영업: 192.168.1.0/26 (0-63)
2. 개발: 192.168.1.64/27 (64-95)
3. 관리: 192.168.1.96/28 (96-111)
4. 여유: 192.168.1.112 이후

---

## 5. 와일드카드 마스크

ACL에서 사용하는 역 마스크.

```
와일드카드 = 255.255.255.255 - 서브넷 마스크

/24 (255.255.255.0) → 와일드카드: 0.0.0.255
/26 (255.255.255.192) → 와일드카드: 0.0.0.63
```

| 목적 | 와일드카드 |
|------|------------|
| 단일 호스트 | 0.0.0.0 (host) |
| /24 네트워크 | 0.0.0.255 |
| 모든 IP | 255.255.255.255 (any) |

---

## 6. 실습 예시

### Windows에서 서브넷 확인
```powershell
ipconfig /all
# Subnet Mask 및 게이트웨이 확인
```

### Linux에서 서브넷 확인
```bash
ip addr show
# 10.0.0.5/24 형식으로 표시
```

### Cisco 라우터에서 서브넷 설정
```cisco
Router(config)# interface g0/0
Router(config-if)# ip address 192.168.1.65 255.255.255.192
! 192.168.1.64/26 네트워크의 게이트웨이
```

<hr class="short-rule">
