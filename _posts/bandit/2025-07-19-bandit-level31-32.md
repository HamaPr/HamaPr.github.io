---
layout: post
title: "[Bandit] Level 31 → Level 32"
date: 2025-07-19 09:02:00 +0900
categories: [bandit]
tags: [overthewire, bandit, linux, git, push, gitignore]
---

## 1. 문제 개요

> **Level Goal**
> 
> There is a git repository at `ssh://bandit31-git@localhost/home/bandit31-git/repo`.
> The password for the user bandit31-git is the same as for the user bandit31.

이번에는 우리가 파일을 만들어서 서버(`master` 원격 저장소)로 **Push(업로드)** 해야 했습니다. 하지만 `.gitignore` 파일이 작업을 방해했습니다. 이를 우회해서 파일을 강제로 올리는 법을 배웠습니다.

---

## 2. 사용 명령어

| 명령어 | 설명 |
|--------|------|
| `git add -f [파일명]` | `.gitignore`에 의해 무시되는 파일을 **강제로(Force)** 스테이징 영역에 추가 |
| `git commit -m "..."` | 변경 사항 저장 |
| `git push` | 원격 저장소로 업로드 |

---

## 3. 풀이 과정

`bandit31` 계정으로 로그인합니다.

```bash
ssh bandit31@bandit.labs.overthewire.org -p 2220
```

### 1. Clone
`/tmp`에 저장소를 복제합니다.

```bash
mkdir /tmp/mygit31
cd /tmp/mygit31
git clone ssh://bandit31-git@localhost/home/bandit31-git/repo
cd repo
```

### 2. 지령 확인
`README.md`를 읽어보면 아래와 같이 적혀있습니다.

> "Push a file to the remote repository... Detail: File name must be 'key.txt'. Content must be 'May I come in?'"

`key.txt` 파일에 `May I come in?` 문구를 넣어서 Push 하라는 미션입니다.

### 3. 파일 생성 및 추가 시도
문제에서 요구한 대로 파일을 만들고 `git add`를 시도합니다.

```bash
echo "May I come in?" > key.txt
git add key.txt
```
여기서 에러가 발생합니다!
`The following paths are ignored by one of your .gitignore files: key.txt`

### 4. 원인 분석
`.gitignore` 파일을 열어보면 `*.txt`가 적혀있을 것입니다. 즉, 모든 텍스트 파일은 Git에 올리지 말라는 설정이 되어 있습니다.

### 5. 강제 추가 (Force Add)
`.gitignore`를 무시하고 파일을 강제로 스테이징 영역에 올리려면 `-f` 옵션을 써야 합니다.

```bash
git add -f key.txt
git commit -m "Upload key"
```

### 6. Push

```bash
git push
```
(비밀번호를 물어보면 `bandit31`의 비번 입력)

Push가 성공하면 원격 서버가 우리의 커밋을 받고, 보상으로 다음 레벨 비밀번호를 출력해줍니다.

```
remote: ### IMPORTANT ###
remote: The password for the next level is: 56l9...
```

---

## 4. 결과

<details markdown="1">
<summary>비밀번호 확인</summary>

```
56l9...
```

</details>

---

## 5. 배운 점

1. **.gitignore**: 빌드 결과물(.exe, .o)이나 비밀번호 파일, 로그 파일 등 Git에 올리면 안 되는 파일들을 실수로 올리는 것을 방지해줍니다.
2. **규칙 우회**: 하지만 `-f` 옵션을 쓰면 이 규칙을 뚫고 강제로 파일을 올릴 수 있습니다. 정말 필요한 예외 상황에서만 써야 합니다.

---

## 6. 보안 관점

- **서버측 훅 (Server-side Hook)**: 이번 문제에서 `git push`를 하자마자 비밀번호가 뜬 이유는, 원격 서버에 `post-receive` 훅 같은 스크립트가 걸려있어서 "누군가 Push를 하면 내용을 검사해서 정답이면 비밀번호를 보여줘라"라고 설정되어 있기 때문입니다. 이는 CI/CD(지속적 통합/배포) 자동화의 기본 원리이기도 합니다.

<hr class="short-rule">