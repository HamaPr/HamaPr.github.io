---
layout: post
title: "[Bandit] Level 28 → Level 29"
date: 2025-07-12 09:04:00 +0900
categories: [bandit]
tags: [overthewire, bandit, linux, git, log, show]
---

## 1. 문제 개요

> **Level Goal**
> 
> There is a git repository at `ssh://bandit28-git@localhost/home/bandit28-git/repo`.
> The password for the next level is the same as for the user bandit28.

이번에도 Git 저장소를 복제해야 했습니다. 하지만 이번엔 `README.md` 파일을 열어봐도 비밀번호가 없었습니다. 대신 "비밀번호가 지워졌다"는 힌트가 있었습니다. Git은 **모든 변경 이력**을 기억하고 있다는 점을 이용해야 함을 알았습니다.

---

## 2. 사용 명령어

| 명령어 | 설명 |
|--------|------|
| `git log` | 커밋(변경) 이력을 최신순으로 보여줌 |
| `git show [커밋ID]` | 특정 커밋의 변경 내용(Diff)을 보여줌 |

---

## 3. 풀이 과정

`bandit28` 계정으로 로그인합니다.

```bash
ssh bandit28@bandit.labs.overthewire.org -p 2220
```

### 1. Clone
`/tmp` 디렉토리에 저장소를 복제합니다.

```bash
mkdir /tmp/mygit28
cd /tmp/mygit28
git clone ssh://bandit28-git@localhost/home/bandit28-git/repo
cd repo
```

### 2. 파일 확인

```bash
bandit28@bandit:/tmp/mygit28/repo$ cat README.md
# Bandit Goal
The password has been censored.
...
```
비밀번호가 검열(censored) 되었다고 나옵니다. 누군가 커밋해서 지운 것입니다.

### 3. 이력 추적 (Log)
누가, 언제 파일을 수정했는지 봅니다.

```bash
bandit28@bandit:/tmp/mygit28/repo$ git log
commit 4a2f43bff6f55891f79579e09367848419615a63
Author: ...
Date: ...
    fix info leak

commit ...
    add password
```
`fix info leak` (정보 유출 수정)이라는 커밋 메시지가 수상합니다. 아마 이때 비밀번호를 지웠을 것입니다. 그렇다면 그 **직전 커밋**이나, 혹은 **저 커밋의 변경 내용**을 보면 지워진 내용(비밀번호)을 볼 수 있습니다.

### 4. 과거 내용 확인 (Show)
수상한 커밋(`4a2f...`)을 열어봅니다.

```bash
bandit28@bandit:/tmp/mygit28/repo$ git show 4a2f43bff6f55891f79579e09367848419615a63
```
(커밋 ID는 앞 4~6자리만 쳐도 됩니다)

출력 결과에서 빨간색(`-`)으로 표시된 줄이 삭제된 내용입니다.

```diff
- The password is BBC...
+ The password has been censored.
```
지워지기 전의 원래 비밀번호를 찾았습니다!

---

## 4. 결과

<details markdown="1">
<summary>비밀번호 확인</summary>

```
BBC...
```

</details>

---

## 5. 배운 점

1. **버전 관리의 양면성**: Git은 실수로 코드를 지워도 되살릴 수 있게 해주지만, 반대로 **실수로 올린 민감 정보(비밀번호, API 키)를 단순히 지우는 것만으로는 완전히 없앨 수 없다**는 것을 의미합니다.
2. **이력 조회**: `git log`와 `git show`는 코드의 변화 과정을 추적하는 가장 기본적인 도구입니다.

---

## 6. 보안 관점

- **Git History 민감 정보 노출**: 개발자들이 자주 하는 실수 중 하나가 AWS Key나 DB 비밀번호를 코드에 적어서 커밋했다가, "아차" 하고 다음 커밋에서 지우는 것입니다. 하지만 해커는 위와 똑같은 방법(`git log`)으로 과거 기록을 뒤져서 키를 찾아냅니다.
- **해결책**: 한번 Git에 올라간 정보는 `git filter-branch`나 BFG Repo-Cleaner 같은 도구로 **이력 자체를 재작성(Rewrite)** 해서 완전히 파기해야 안전합니다.

<hr class="short-rule">