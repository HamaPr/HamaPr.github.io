---
layout: post
title: "A06:2021 - Vulnerable and Outdated Components (취약하고 오래된 구성 요소) 분석 보고서"
date: 2025-08-30 17:00:00 +0900
categories: [owasp-top-10]
---

### ***프로젝트 6. A06:2021 - Vulnerable and Outdated Components (취약하고 오래된 구성 요소) 분석 보고서***

### 1. 취약점 개요

   취약하고 오래된 구성 요소 문제는 '최첨단 요새를 지었지만 그 성벽을 금이 간 불량 벽돌로 쌓아 올린 것'과 같습니다. 개발자가 직접 작성한 코드가 아무리 완벽하더라도 가져다 쓴 외부 라이브러리나 프레임워크에 이미 알려진 보안 결함이 있다면 공격자는 바로 그 약한 벽돌 하나를 공략하여 요새 전체를 무너뜨릴 수 있습니다. 이는 현대 소프트웨어 개발의 근간인 오픈소스 생태계를 노리는 소프트웨어 공급망 공격**`Software Supply Chain Attack`**의 핵심 통로가 됩니다.

   본 보고서는 공격자가 어떻게 단 하나의 오래된 구성 요소(Apache)를 식별하고 이를 공개된 취약점 정보(CVE)와 연결하여 시스템 전체를 위협하는 실제적인 공격 경로를 찾아내는지 그 과정을 증명합니다.

---

### 2. 시나리오 분석 및 재현: 공급망의 약한 고리 찾기

#### ***Part 1. [구성 요소 식별] Nmap 스캔으로 서버의 웹 서버 버전`Apache 2.4.58` 확인***

*   ***공격 시나리오:***
   공격자는 본격적인 공격에 앞서 목표 시스템이 어떤 부품(소프트웨어 구성 요소)들로 만들어져 있는지 최대한 자세히 파악하려 할 것이다. 만약 서버가 자신의 버전 정보를 쉽게 노출한다면 이는 공급망 공격의 첫 번째 실마리가 될 것이다.

*   ***공격 검증:***
   `nmap` 도구를 이용해 서버의 열린 포트와 서비스 버전을 스캔한 결과, 이 서버가 웹 서버로 **`Apache httpd 2.4.58`** 버전을 사용하고 있다는 구체적인 정보를 알아낼 수 있었습니다. 이 버전 정보는 우리가 앞으로 분석할 가장 중요한 단서입니다.

![Apache version](/assets/images/owasp-top-10/A06_P1-1.png)

*   ***위험성 분석:***
   정확한 버전 정보 노출은 공격자에게 '공격 설명서'를 건네주는 것과 같습니다. 공격자는 이 정보를 통해 불필요한 추측 없이 해당 버전에만 존재하는 특정 공격 기법을 바로 시도할 수 있습니다.

>  공격자가 벽돌의 정확한 모델명`Apache 2.4.58`을 알아냈습니다. 다음 단계는 이 모델의 공개된 설계 결함(CVE) 목록을 확인하는 것입니다.

#### ***Part 2. [취약점 분석] 식별된 버전을 기반으로 공개된 CVE 검색 및 공격 가능성 확인***

*   ***공격 시나리오:***
   알아낸 버전 정보`Apache 2.4.58`를 가지고 인터넷의 공개된 취약점 정보(CVE)를 검색하면 해당 버전에만 적용되는 구체적인 공격 방법을 찾아낼 수 있을 것이다.

*   ***공격 검증:***
   인터넷에서 `Apache 2.4.58 vulnerability`를 검색한 결과, 이 버전에 영향을 미치는 여러 보안 취약점들이 보고된 것을 확인했습니다. 그 중에서도 **`CVE-2024-43394`**와 **`CVE-2024-43204`**는 SSRF(Server-Side Request Forgery) 공격에 악용될 수 있는 위험한 취약점이었습니다.

![SSRF CVE](/assets/images/owasp-top-10/A06_P2-1.png)

*   ***위험성 분석:***
   이는 개발자가 SSRF에 취약한 코드를 단 한 줄도 짜지 않았더라도 단지 취약한 버전의 Apache 웹 서버를 사용했다는 사실 하나만으로 서버가 SSRF 공격에 노출될 수 있음을 의미합니다. 공격자는 이 구성 요소의 취약점을 이용해 내부망을 공격하는 등 더 큰 피해를 유발할 수 있습니다.

>  수동으로 하나의 취약점을 찾는 것은 가능했지만 현대 애플리케이션은 수백 개의 부품으로 이루어져 있습니다. 방어자는 이 문제를 어떻게 대규모로 관리할 수 있을까요?

#### ***Part 3. [자동화된 방어] 소프트웨어 구성 요소 분석(SCA)의 중요성***

*   ***방어 전략:***
   수백 개에 달하는 외부 라이브러리의 버전을 사람이 일일이 확인하고 CVE를 검색하는 것은 불가능합니다. 따라서 **SCA(Software Composition Analysis)** 라는 자동화된 도구를 사용하여 우리 시스템이 사용하는 모든 부품의 목록과 버전을 자동으로 추출하고 알려진 취약점 데이터베이스와 비교하여 위험을 식별해야 합니다.

*   ***솔루션 예시:***
   GitHub에 내장된 `Dependabot`과 같은 기능은 위험한 구성 요소를 발견하면 단순히 알려주는 것을 넘어 안전한 최신 버전으로 업데이트하라는 코드 수정 제안(Pull Request)까지 자동으로 생성해 줍니다. 이는 개발자가 보안에 드는 노력을 최소화하면서도 시스템을 안전하게 유지할 수 있도록 돕는 매우 효과적인 솔루션입니다.

![Dependabot](/assets/images/owasp-top-10/A06_P3-2.png)

*   ***분석 결론:***
   결국 '취약하고 오래된 구성 요소' 문제는 주기적인 자동화 스캔과 신속한 패치 적용을 통해 꾸준히 관리하는 것이 유일하고 가장 효과적인 해결책입니다.

---

### 4. 원인 및 해결 방안

*   ***원인: 체계적인 패치 관리 프로세스의 부재***

   이 문제의 근본 원인은 단순히 '한번 설치하고 잊어버리는 것'이 아니라 업데이트 시 발생할 수 있는 서비스 장애에 대한 두려움과 이를 통제할 체계적인 패치 관리 프로세스가 없기 때문입니다. '작동하는 시스템은 건드리지 않는 것이 좋다'는 인식은 더 큰 보안 사고로 이어질 수 있는 시한폭탄을 방치하는 것과 같습니다.

*   ***해결 방안: 위험을 통제하는 체계적인 패치 관리 정책 수립***

   1.  ***자산 식별:*** 먼저 우리 시스템이 어떤 부품들로 이루어져 있는지 정확한 목록 **SBOM`Software Bill of Materials`**을 만들어야 합니다.
   2.  ***정기적인 스캔 및 위험도 평가:*** SCA 도구를 활용해 사용하는 부품들의 신규 취약점을 지속적으로 탐지하고 우리 시스템에 미치는 위험도를 평가하여 패치의 우선순위를 정해야 합니다.
   3.  ***사전 테스트 및 단계적 배포:*** 운영 환경에 바로 적용하기 전에 테스트 환경에서 업데이트를 먼저 적용하여 호환성 문제를 검증해야 합니다. 이후 일부 서버 그룹에 먼저 패치를 적용하고 점진적으로 확대하여 위험을 최소화해야 합니다.
   4.  ***신속한 대응 및 롤백 계획:*** 치명적인 취약점에 대해서는 신속하게 패치를 적용하고 만일의 사태에 대비해 이전 버전으로 되돌릴 수 있는 **롤백`Rollback`** 계획도 함께 준비해야 합니다.

---

### 5. 공급망 보안

A06은 다른 OWASP Top 10 항목들과 달리 전통적인 '시큐어 코딩' 관점으로 해결하기 어려운 독특한 특징을 가집니다.

*   ***시큐어 코딩과의 차이점:***
   A03 SQL 인젝션과 같은 취약점은 개발자가 작성한 코드의 논리적 결함`mysql_query($id)` 때문에 발생합니다. 따라서 개발자가 코드를 직접 수정(`Prepared Statement` 사용)하여 해결할 수 있습니다.

   하지만 A06은 개발자가 작성한 코드가 아닌 **`외부에서 가져온 구성 요소 자체의 결함`**이 원인입니다. 따라서 해결책은 코드 수정이 아닌 해당 구성 요소를 **업데이트**하거나 **교체**하는 것입니다.

*   ***핵심 방어 원리:***
   결론적으로 A06 방어의 핵심 원리는 '내 코드만 잘 짜면 된다'는 생각을 넘어 **'내가 사용하는 모든 부품의 안전을 책임진다'** 는 **소프트웨어 공급망 보안**의 관점으로 확장하는 것입니다. 이는 코드 작성 능력만큼이나 체계적인 자산 관리와 패치 적용 프로세스를 구축하고 실행하는 능력이 중요함을 의미합니다.


<hr class="short-rule">
