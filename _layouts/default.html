<!DOCTYPE html>
<html lang="ko" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <style>
    html,
    body {
      background-color: #202124;
    }
  </style>
  <meta name="theme-color" content="#202124" media="(prefers-color-scheme: dark)">

  <link rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%23FFC0CB'/%3E%3Ccircle cx='50' cy='65' r='28' fill='%23d4d4d8'/%3E%3Cpath d='M35,32 l5,-10 l10,10 l10,-10 l5,10 z' fill='%23FFD700' stroke='%23F7B500' stroke-width='2'/%3E%3Ccircle cx='38' cy='58' r='5' fill='white'/%3E%3Ccircle cx='62' cy='58' r='5' fill='white'/%3E%3Ccircle cx='38' cy='58' r='2' fill='black'/%3E%3Ccircle cx='62' cy='58' r='2' fill='black'/%3E%3Ccircle cx='35' cy='70' r='3' fill='%23b0a8b9'/%3E%3Ccircle cx='65' cy='70' r='3' fill='%23b0a8b9'/%3E%3C/svg%3E">

  <link rel="stylesheet" crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <link rel="stylesheet" href="/assets/css/style.css">

  {% seo %}
</head>

<body>
  {% include header.html %}

  <main class="page-wrapper" aria-label="Content">
    {{ content }}
  </main>

  {% include footer.html %}

  <a id="back-to-top" href="#">↑</a>
  <script src="/assets/js/script.js"></script>

  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

    const config = {
      startOnLoad: false,
      theme: 'dark',
      securityLevel: 'loose',
      fontFamily: 'Pretendard'
    };
    mermaid.initialize(config);

    document.addEventListener('DOMContentLoaded', async () => {
      const elements = document.querySelectorAll('pre code.language-mermaid');

      const nodesToProcess = [];

      for (const el of elements) {
        const pre = el.closest('pre');
        const parent = pre.parentElement;

        const graphDef = el.textContent;

        const newDiv = document.createElement('div');
        newDiv.className = 'mermaid';
        newDiv.textContent = graphDef;

        if (parent && parent.classList.contains('highlighter-rouge')) {
          parent.replaceWith(newDiv);
        } else if (pre) {
          pre.replaceWith(newDiv);
        }

        nodesToProcess.push(newDiv);
      }

      if (nodesToProcess.length > 0) {
        try {
          await mermaid.run({ nodes: nodesToProcess });
        } catch (error) {
          console.error("Mermaid 렌더링 중 오류 발생 :", error);
        }
      }
    });
  </script>
</body>

</html>